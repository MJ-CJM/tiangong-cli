# Pull Request

## ğŸ“‹ å˜æ›´æ¦‚è¿°

<!-- ç®€è¦æè¿°æœ¬æ¬¡ PR çš„ç›®çš„å’Œå†…å®¹ -->

æœ¬ PR å®ç°äº†...

---

## ğŸ¯ å˜æ›´ç±»å‹

è¯·å‹¾é€‰é€‚ç”¨çš„é€‰é¡¹ï¼š

- [ ] ğŸ†• æ–°åŠŸèƒ½ï¼ˆfeatï¼‰
- [ ] ğŸ› Bug ä¿®å¤ï¼ˆfixï¼‰
- [ ] ğŸ“š æ–‡æ¡£æ›´æ–°ï¼ˆdocsï¼‰
- [ ] ğŸ¨ ä»£ç æ ¼å¼ï¼ˆstyleï¼‰
- [ ] â™»ï¸ é‡æ„ï¼ˆrefactorï¼‰
- [ ] âœ… æµ‹è¯•ç›¸å…³ï¼ˆtestï¼‰
- [ ] ğŸ”§ æ„å»º/å·¥å…·é“¾ï¼ˆchoreï¼‰
- [ ] âš¡ æ€§èƒ½ä¼˜åŒ–ï¼ˆperfï¼‰

---

## ğŸ“ è¯¦ç»†å˜æ›´è¯´æ˜

### ä¸»è¦å˜æ›´

<!-- è¯¦ç»†æè¿°åšäº†å“ªäº›æ”¹åŠ¨ -->

1. **æ–°å¢ `/diagnose` å‘½ä»¤**
   - ä½ç½®: `packages/cli/src/ui/commands/diagnoseCommand.ts`
   - åŠŸèƒ½: æ£€æµ‹ç³»ç»Ÿç¯å¢ƒã€é…ç½®ã€ä¾èµ–ã€ç½‘ç»œè¿é€šæ€§
   - æ”¯æŒåŒè¾“å‡ºæ ¼å¼ï¼šè¡¨æ ¼ï¼ˆé»˜è®¤ï¼‰å’Œ JSONï¼ˆ`--json` flagï¼‰

2. **å®Œå–„é¡¹ç›®æ–‡æ¡£**
   - ä½ç½®: `study/` ç›®å½•
   - å†…å®¹: 8 ç¯‡æ¶æ„ä¸å¼€å‘æ–‡æ¡£ï¼ˆ00-08ï¼‰
   - æ–°å¢: `.env.example` é…ç½®æ¨¡æ¿

3. **ç¤ºä¾‹ä¸æµ‹è¯•**
   - æµ‹è¯•: `packages/cli/src/ui/commands/diagnoseCommand.test.ts`
   - ç¤ºä¾‹: `examples/diagnose-demo.sh`

### æŠ€æœ¯ç»†èŠ‚

<!-- é‡è¦çš„æŠ€æœ¯å®ç°ç»†èŠ‚ -->

- ä½¿ç”¨ `AbortSignal` æ”¯æŒå‘½ä»¤å–æ¶ˆ
- ç½‘ç»œæ£€æŸ¥ä½¿ç”¨ 5 ç§’è¶…æ—¶é¿å…é˜»å¡
- JSON è¾“å‡ºç»“æ„åŒ–ä¾¿äº CI/CD é›†æˆ

---

## ğŸ§ª æµ‹è¯•è¯´æ˜

### æµ‹è¯•è¦†ç›–

- [x] å•å…ƒæµ‹è¯•ï¼ˆ`diagnoseCommand.test.ts`ï¼‰
  - [x] å…ƒæ•°æ®éªŒè¯
  - [x] API Key æ£€æµ‹
  - [x] JSON è¾“å‡ºæ ¼å¼
  - [x] è¡¨æ ¼è¾“å‡ºæ ¼å¼
  - [x] AbortSignal æ”¯æŒ
  - [x] é”™è¯¯å¤„ç†

- [ ] é›†æˆæµ‹è¯•
  - [ ] ä¸çœŸå®ç¯å¢ƒäº¤äº’ï¼ˆæ‰‹åŠ¨æµ‹è¯•ï¼‰

- [ ] E2E æµ‹è¯•
  - [ ] æš‚æœªå®ç°ï¼ˆå¯é€‰ï¼‰

### å¦‚ä½•æµ‹è¯•

```bash
# 1. æ„å»ºé¡¹ç›®
npm run build

# 2. è¿è¡Œå•å…ƒæµ‹è¯•
npm test -- packages/cli/src/ui/commands/diagnoseCommand.test.ts

# 3. æ‰‹åŠ¨æµ‹è¯•
npm start -- /diagnose
npm start -- /diagnose --json

# 4. å®Œæ•´é¢„æ£€
npm run preflight
```

### æµ‹è¯•ç»“æœ

<!-- ç²˜è´´æµ‹è¯•è¾“å‡ºæˆ–æˆªå›¾ -->

```
âœ“ diagnoseCommand > should have correct metadata
âœ“ diagnoseCommand > should execute without throwing errors
âœ“ diagnoseCommand > should detect missing API key
âœ“ diagnoseCommand > should output JSON format
âœ“ diagnoseCommand > should check system information
```

---

## ğŸ“¦ å½±å“èŒƒå›´

### æ–°å¢æ–‡ä»¶

- `packages/cli/src/ui/commands/diagnoseCommand.ts` - å‘½ä»¤å®ç°
- `packages/cli/src/ui/commands/diagnoseCommand.test.ts` - æµ‹è¯•
- `examples/diagnose-demo.sh` - ä½¿ç”¨ç¤ºä¾‹
- `.env.example` - ç¯å¢ƒå˜é‡æ¨¡æ¿
- `study/00-overview.md` è‡³ `study/08-roadmap.md` - æ–‡æ¡£
- `study/README.md` - æ–‡æ¡£ç´¢å¼•

### ä¿®æ”¹æ–‡ä»¶

- æš‚æ— ï¼ˆéœ€è¦åœ¨åç»­ PR ä¸­æ³¨å†Œå‘½ä»¤ï¼‰

### ç ´åæ€§å˜æ›´

- [ ] æ­¤ PR åŒ…å«ç ´åæ€§å˜æ›´
- [ ] éœ€è¦æ›´æ–°ç”¨æˆ·æ–‡æ¡£
- [ ] éœ€è¦è¿ç§»è„šæœ¬

<!-- å¦‚æœæœ‰ç ´åæ€§å˜æ›´ï¼Œè¯·è¯¦ç»†è¯´æ˜ -->

---

## ğŸ“¸ æˆªå›¾/å½•å±

<!-- å¦‚æœé€‚ç”¨ï¼Œæ·»åŠ æˆªå›¾æˆ– GIF æ¼”ç¤º -->

### è¡¨æ ¼è¾“å‡º

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           GEMINI CLI DIAGNOSTICS REPORT                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”â”â” System â”â”â”

  âœ“ Platform          darwin arm64
  âœ“ Node.js           v20.10.0
  âœ“ Memory            16.00 GB total, 8.50 GB free
  âœ“ Working Directory /Users/you/projects/gemini-cli

...
```

### JSON è¾“å‡º

```json
[
  {
    "category": "System",
    "checks": [
      {
        "name": "Platform",
        "status": "ok",
        "value": "darwin arm64"
      },
      ...
    ]
  }
]
```

---

## âš ï¸ æ½œåœ¨é£é™©ä¸ç¼“è§£

### å·²è¯†åˆ«é£é™©

| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|---------|
| å‘½ä»¤æœªæ³¨å†Œåˆ°ä¸»ç¨‹åº | ç”¨æˆ·æ— æ³•ä½¿ç”¨ | åç»­ PR å°†å®Œæˆæ³¨å†Œ |
| ç½‘ç»œæ£€æŸ¥è¶…æ—¶ | æ…¢ç½‘ç»œç¯å¢ƒä½“éªŒå·® | å·²è®¾ç½® 5 ç§’è¶…æ—¶ + é”™è¯¯å¤„ç† |

### å›æ»šæ–¹æ¡ˆ

```bash
# å¦‚æœå‡ºç°é—®é¢˜ï¼Œåˆ é™¤æ–°å¢æ–‡ä»¶å³å¯
rm -f packages/cli/src/ui/commands/diagnoseCommand.ts
rm -f packages/cli/src/ui/commands/diagnoseCommand.test.ts
npm run build
```

---

## âœ… æ£€æŸ¥æ¸…å•

### ä»£ç è´¨é‡

- [x] ä»£ç é€šè¿‡ ESLintï¼ˆ`npm run lint`ï¼‰
- [x] ä»£ç æ ¼å¼ç¬¦åˆ Prettierï¼ˆ`npm run format`ï¼‰
- [x] ç±»å‹æ£€æŸ¥é€šè¿‡ï¼ˆ`npm run typecheck`ï¼‰
- [x] æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ˆ`npm test`ï¼‰
- [x] å®Œæ•´é¢„æ£€é€šè¿‡ï¼ˆ`npm run preflight`ï¼‰ - éƒ¨åˆ†é€šè¿‡ï¼ˆæ–°æ–‡ä»¶æœªé›†æˆï¼‰

### æ–‡æ¡£

- [x] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£ï¼ˆ`study/` ç›®å½•ï¼‰
- [x] æ·»åŠ äº†ä»£ç æ³¨é‡Š
- [x] æ·»åŠ äº† JSDocï¼ˆå¦‚é€‚ç”¨ï¼‰
- [x] æ›´æ–°äº† CHANGELOGï¼ˆå¦‚é€‚ç”¨ï¼‰

### å…¼å®¹æ€§

- [x] å‘åå…¼å®¹ï¼ˆæ— ç ´åæ€§å˜æ›´ï¼‰
- [x] è·¨å¹³å°æµ‹è¯•ï¼ˆmacOSï¼‰ - Windows/Linux å¾…æµ‹è¯•
- [x] Node.js >= 20 å…¼å®¹æ€§

### å®‰å…¨

- [x] æ— æ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼ˆAPI Key å·²è„±æ•æ˜¾ç¤ºï¼‰
- [x] è¾“å…¥æ ¡éªŒï¼ˆå‘½ä»¤å‚æ•°ï¼‰
- [x] é”™è¯¯å¤„ç†ï¼ˆç½‘ç»œå¼‚å¸¸ã€è¶…æ—¶ï¼‰

---

## ğŸ”— ç›¸å…³ Issue

Closes #XXX ï¼ˆå¦‚æœæœ‰ï¼‰
Relates to #YYY

---

## ğŸ‘¥ Reviewer æŒ‡å—

### é‡ç‚¹å…³æ³¨

1. **å‘½ä»¤å®ç°**: æ£€æŸ¥ `diagnoseCommand.ts` çš„é€»è¾‘æ˜¯å¦åˆç†
2. **é”™è¯¯å¤„ç†**: ç¡®ä¿æ‰€æœ‰å¼‚å¸¸æƒ…å†µéƒ½è¢«å¦¥å–„å¤„ç†
3. **æµ‹è¯•è¦†ç›–**: éªŒè¯æµ‹è¯•æ˜¯å¦å……åˆ†
4. **æ–‡æ¡£è´¨é‡**: æ£€æŸ¥ `study/` æ–‡æ¡£æ˜¯å¦æ¸…æ™°å‡†ç¡®

### å®¡æŸ¥å»ºè®®

```bash
# 1. æ‹‰å–åˆ†æ”¯
git fetch origin
git checkout feature/äºŒæ¬¡å¼€å‘å‡†å¤‡å·¥ä½œ

# 2. å®¡æŸ¥ä»£ç 
git diff main...feature/äºŒæ¬¡å¼€å‘å‡†å¤‡å·¥ä½œ

# 3. è¿è¡Œæµ‹è¯•
npm install
npm run build
npm test -- packages/cli/src/ui/commands/diagnoseCommand.test.ts

# 4. æ‰‹åŠ¨æµ‹è¯•
npm start -- /diagnose
```

---

## ğŸ“… éƒ¨ç½²è®¡åˆ’

### éƒ¨ç½²æ­¥éª¤

1. **åˆå¹¶åˆ° dev åˆ†æ”¯**
2. **åç»­ PR å®Œæˆå‘½ä»¤æ³¨å†Œ**
   - ä¿®æ”¹ `BuiltInCommandLoader` æ·»åŠ  `diagnoseCommand`
   - æ›´æ–°å‘½ä»¤åˆ—è¡¨
3. **å‘å¸ƒåˆ° staging ç¯å¢ƒæµ‹è¯•**
4. **åˆå¹¶åˆ° main åˆ†æ”¯**
5. **å‘å¸ƒæ–°ç‰ˆæœ¬ï¼ˆ0.7.0ï¼‰**

### é¢„è®¡å‘å¸ƒæ—¶é—´

- Dev åˆ†æ”¯: å³æ—¶
- Staging: 1-2 å¤©å
- Production: 1 å‘¨å

---

## ğŸ’¬ å¤‡æ³¨

<!-- å…¶ä»–éœ€è¦è¯´æ˜çš„å†…å®¹ -->

æœ¬ PR æ˜¯äºŒæ¬¡å¼€å‘å‡†å¤‡å·¥ä½œçš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œé‡ç‚¹åœ¨äºï¼š
1. **å»ºç«‹å®Œæ•´çš„æ¶æ„æ–‡æ¡£ä½“ç³»**ï¼ˆ`study/` ç›®å½•ï¼‰
2. **å®ç°æœ€å°å¯è¡Œçš„æ–°æŒ‡ä»¤**ï¼ˆ`/diagnose`ï¼‰
3. **æä¾›æ‰©å±•å¼€å‘æ¨¡æ¿ä¸ç¤ºä¾‹**

åç»­å°†ç»§ç»­å®Œæˆå¤šæ¨¡å‹æ”¯æŒç­‰åŠŸèƒ½ã€‚

---

**æ„Ÿè°¢å®¡æŸ¥ï¼** ğŸ™
